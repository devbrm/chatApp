(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{15:function(e,t,a){e.exports=a(31)},20:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(13),l=a.n(c),o=a(5),u=(a(20),a(9)),m=a.n(u);m.a.initializeApp({apiKey:"AIzaSyDq9WMfI3E8u9FuP4PI0666wWE61kl-lUY",authDomain:"chat-app-5a6d2.firebaseapp.com",databaseURL:"https://chat-app-5a6d2.firebaseio.com",projectId:"chat-app-5a6d2",storageBucket:"chat-app-5a6d2.appspot.com",messagingSenderId:"441381505245",appId:"1:441381505245:web:6bef42ec64d28e21103334",measurementId:"G-8B6F6ESB79"});var s=m.a.database(),i=m.a;var p=function(e){var t=e.room,a=Object(n.useContext)(g),c=a.setRoom,l=a.setMenuClicked;return r.a.createElement("button",{name:t,onClick:function(e){var t=e.target.name;c(t),l(!1)}},t)},f=s.ref("chat-rooms");var v=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),u=Object(o.a)(l,2),m=u[0],s=u[1],i=Object(n.useContext)(g),v=i.setRoom,E=i.setMenuClicked;return Object(n.useEffect)((function(){var e=!0;return f.on("value",(function(t){var a=t.val();if(a){var n=Object.keys(a);e&&s(n)}else e&&s([])})),function(){e=!1}}),[]),r.a.createElement("div",{className:"chatRoomsContainer"},r.a.createElement("a",{href:"https://devbrm.github.io/portfolio/",rel:"noopener noreferrer",target:"_blank"},"Visit Developer's site"),r.a.createElement("h1",null,"Select any Chat room"),r.a.createElement("div",{className:"chatRooms"},m.map((function(e){return r.a.createElement(p,{key:e,room:e})}))),r.a.createElement("div",null,"or"),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Room Name",type:"text",onChange:function(e){c(e.target.value)},value:a}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),a&&(v(a),E(!1),c(""))}},"Create Room")))},E=a(14);var d=function(e){var t=e.item,a=e.userName;return r.a.createElement("div",{className:t.userName===a?"userMessages":""},t.userName,r.a.createElement("p",{id:t.key,"data-is-big":t.message.length>100,"data-username":t.userName},t.message),r.a.createElement("div",{className:"timeStamp"},t.timeStamp))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===e.length||(e.trim().length?t?e.length<=t:e.trim().length:void 0)};var b=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1],u=Object(n.useState)([]),m=Object(o.a)(u,2),p=m[0],f=m[1],v=Object(n.useContext)(N).userName,b=e.room,g=i.firestore.Timestamp,j=Object(n.useRef)(null),O=s.ref("chat-rooms/"+b);return Object(n.useEffect)((function(){var e=!0;return O.on("value",(function(t){var a=t.val();if(a){var n=Object.keys(a);e&&f(n.map((function(e){return Object(E.a)({key:e},a[e])})))}else e&&f([])})),function(){e=!1}}),[b]),Object(n.useEffect)((function(){j.current.lastChild&&j.current.lastChild.scrollIntoView()}),[p]),r.a.createElement("div",{className:"messagesContainer"},r.a.createElement("div",{ref:j,className:"messages"},p.map((function(e){return r.a.createElement(d,{item:e,userName:v,key:e.key})}))),r.a.createElement("form",null,r.a.createElement("input",{onChange:function(e){var t=e.target.value;l(t)},onKeyDown:function(e){"Enter"===e.key&&h(c)&&c.length&&(e.preventDefault(),O.push({message:c.trim(),userName:v,timeStamp:g.now().toDate().toLocaleTimeString()+"  "+g.now().toDate().toLocaleDateString()}),l(""))},type:"text",value:c,placeholder:"Aa"}),r.a.createElement("button",{onClick:function(e){e.preventDefault(),h(c)&&c.length&&(O.push({message:c.trim(),userName:v}),l(""))}},r.a.createElement("i",{className:"fas fa-2x fa-paper-plane"}))))},g=r.a.createContext();var j=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),u=Object(o.a)(l,2),m=u[0],s=u[1],i=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.Provider,{value:{setRoom:s,setMenuClicked:c}},r.a.createElement(v,null)))};return!m||a?r.a.createElement(i,null):r.a.createElement("div",{className:"chatContainer"},r.a.createElement("div",{className:"hamMenu",onClick:function(e){return c((function(e){return!e}))}},r.a.createElement("div",null)),r.a.createElement(b,{room:m}))};var O=function(){var e=Object(n.useContext)(N).setUserName,t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{className:"welcomePage"},r.a.createElement("h1",null,"Welcome to the chat App"),r.a.createElement("p",null,"Enter your name and lets have fun together"),r.a.createElement("form",null,r.a.createElement("input",{type:"text",value:c,placeholder:"Name (max 12 characters)",onChange:function(e){var t=e.target.value;h(t,12)&&l(t)}}),r.a.createElement("button",{type:"submit",onClick:function(t){e(c)}},"Lets Go")))},N=r.a.createContext();var C=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1];return a?r.a.createElement("div",{className:"App"},r.a.createElement(N.Provider,{value:{userName:a,setUserName:c}},r.a.createElement(j,null))):r.a.createElement(N.Provider,{value:{userName:a,setUserName:c}},r.a.createElement(O,null))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.ba703056.chunk.js.map