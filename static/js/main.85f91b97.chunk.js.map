{"version":3,"sources":["library/firebase.js","components/Chatroom.js","components/ChatRooms.js","components/Message.js","components/Messages.js","components/Chat.js","components/WelcomePage.js","App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","firebaseDB","database","Chatroom","props","room","useContext","ChatContext","setRoom","setMenuClicked","name","onClick","e","target","chatRoomsRef","ref","ChatRooms","useState","roomName","setRoomName","chatRooms","setChatRooms","useEffect","isMounted","on","snap","data","val","keys","Object","className","href","rel","map","key","placeholder","type","onChange","value","preventDefault","Message","item","userName","id","data-is-big","message","length","data-username","Messages","setMessage","setData","AppContext","messagesRef","useRef","roomRef","current","lastChild","scrollIntoView","onKeyDown","push","trim","React","createContext","Chat","menuClicked","RenderRooms","Provider","prev","WelcomePage","setUserName","currentName","setCurrentName","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.85f91b97.chunk.js","sourcesContent":["import firebase from \"firebase\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDq9WMfI3E8u9FuP4PI0666wWE61kl-lUY\",\r\n  authDomain: \"chat-app-5a6d2.firebaseapp.com\",\r\n  databaseURL: \"https://chat-app-5a6d2.firebaseio.com\",\r\n  projectId: \"chat-app-5a6d2\",\r\n  storageBucket: \"chat-app-5a6d2.appspot.com\",\r\n  messagingSenderId: \"441381505245\",\r\n  appId: \"1:441381505245:web:6bef42ec64d28e21103334\",\r\n  measurementId: \"G-8B6F6ESB79\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const firebaseDB = firebase.database();\r\n\r\nexport default firebase;\r\n","import React, { useContext } from \"react\";\r\nimport { ChatContext } from \"./Chat\";\r\n\r\nfunction Chatroom(props) {\r\n  const { room } = props;\r\n  const { setRoom, setMenuClicked } = useContext(ChatContext);\r\n\r\n  const handleClick = (e) => {\r\n    const { name } = e.target;\r\n    setRoom(name);\r\n    setMenuClicked(false);\r\n  };\r\n\r\n  return (\r\n    <button name={room} onClick={handleClick}>\r\n      {room}\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Chatroom;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { firebaseDB } from \"../library/firebase\";\r\nimport { ChatContext } from \"./Chat\";\r\nimport Chatroom from \"./Chatroom\";\r\nconst chatRoomsRef = firebaseDB.ref(\"chat-rooms\");\r\n\r\nfunction ChatRooms() {\r\n  const [roomName, setRoomName] = useState(\"\");\r\n  const [chatRooms, setChatRooms] = useState([]);\r\n  const { setRoom, setMenuClicked } = useContext(ChatContext);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    chatRoomsRef.on(\"value\", (snap) => {\r\n      const data = snap.val();\r\n      if (!data) {\r\n        if (isMounted) setChatRooms([]);\r\n        return;\r\n      }\r\n      const keys = Object.keys(data);\r\n      if (isMounted) setChatRooms(keys);\r\n    });\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    setRoomName(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!!!roomName) return;\r\n\r\n    setRoom(roomName);\r\n    setMenuClicked(false);\r\n    setRoomName(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"chatRoomsContainer\">\r\n      <a\r\n        href=\"https://devbrm.github.io/portfolio/\"\r\n        rel=\"noopener noreferrer\"\r\n        target=\"_blank\"\r\n      >\r\n        Visit Developer's site\r\n      </a>\r\n      <h1>Select any Chat room</h1>\r\n      <div className=\"chatRooms\">\r\n        {chatRooms.map((room) => (\r\n          <Chatroom key={room} room={room} />\r\n        ))}\r\n      </div>\r\n      <div>or</div>\r\n      <form>\r\n        <input\r\n          placeholder=\"Room Name\"\r\n          type=\"text\"\r\n          onChange={handleChange}\r\n          value={roomName}\r\n        ></input>\r\n        <button type=\"submit\" onClick={handleSubmit}>\r\n          Create Room\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatRooms;\r\n","import React from \"react\";\r\n\r\nfunction Message(props) {\r\n  const { item, userName } = props;\r\n\r\n  return (\r\n    <div className={item.userName === userName ? \"userMessages\" : \"\"}>\r\n      {item.userName}\r\n      <p\r\n        id={item.key}\r\n        data-is-big={item.message.length > 100 ? true : false}\r\n        data-username={item.userName}\r\n      >\r\n        {item.message}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React, { useEffect, useState, useContext, useRef } from \"react\";\r\nimport { firebaseDB } from \"../library/firebase\";\r\nimport { AppContext } from \"../App\";\r\nimport Message from \"./Message\";\r\n\r\nfunction Messages(props) {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [data, setData] = useState([]);\r\n  const { userName } = useContext(AppContext);\r\n  const { room } = props;\r\n  const messagesRef = useRef(null);\r\n  const roomRef = firebaseDB.ref(\"chat-rooms/\" + room);\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    roomRef.on(\"value\", (snap) => {\r\n      const data = snap.val();\r\n      if (!data) {\r\n        if (isMounted) setData([]);\r\n        return;\r\n      }\r\n\r\n      const keys = Object.keys(data);\r\n\r\n      if (isMounted)\r\n        setData(\r\n          keys.map((key) => {\r\n            return {\r\n              key,\r\n              ...data[key],\r\n            };\r\n          })\r\n        );\r\n    });\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [room]);\r\n\r\n  useEffect(() => {\r\n    if (messagesRef.current.lastChild)\r\n      messagesRef.current.lastChild.scrollIntoView();\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { value } = e.target;\r\n    setMessage(value);\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key !== \"Enter\") return;\r\n\r\n    e.preventDefault();\r\n    roomRef.push({\r\n      message: message.trim(),\r\n      userName,\r\n    });\r\n    setMessage(\"\");\r\n  };\r\n\r\n  const handleNewMessage = (e) => {\r\n    e.preventDefault();\r\n\r\n    roomRef.push({\r\n      message: message.trim(),\r\n      userName,\r\n    });\r\n    setMessage(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"messagesContainer\">\r\n      <div ref={messagesRef} className=\"messages\">\r\n        {data.map((item) => (\r\n          <Message item={item} userName={userName} key={item[\"key\"]} />\r\n        ))}\r\n      </div>\r\n      <form>\r\n        <input\r\n          onChange={handleChange}\r\n          onKeyDown={handleKeyDown}\r\n          type=\"text\"\r\n          value={message}\r\n          placeholder=\"Aa\"\r\n        ></input>\r\n        <button onClick={handleNewMessage}>\r\n          <i className=\"fas fa-2x fa-paper-plane\"></i>\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Messages;\r\n","import React, { useState } from \"react\";\r\nimport ChatRooms from \"./ChatRooms\";\r\nimport Messages from \"./Messages\";\r\nexport const ChatContext = React.createContext();\r\n\r\nfunction Chat() {\r\n  const [menuClicked, setMenuClicked] = useState(false);\r\n  const [room, setRoom] = useState(\"\");\r\n\r\n  const RenderRooms = () => (\r\n    <>\r\n      <ChatContext.Provider value={{ setRoom, setMenuClicked }}>\r\n        <ChatRooms />\r\n      </ChatContext.Provider>\r\n    </>\r\n  );\r\n\r\n  //toggele the state for the menuclicked\r\n  const handleMenuClick = (e) => setMenuClicked((prev) => !prev);\r\n\r\n  // if no rooms or the menu is clicked then render the <RenderRooms /> component\r\n  if (!room || menuClicked) return <RenderRooms />;\r\n\r\n  return (\r\n    <div className=\"chatContainer\">\r\n      <div className=\"hamMenu\" onClick={handleMenuClick}>\r\n        <div></div>\r\n      </div>\r\n      <Messages room={room} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React, { useContext, useState } from \"react\";\r\nimport { AppContext } from \"../App\";\r\n\r\nfunction WelcomePage() {\r\n  const { setUserName } = useContext(AppContext);\r\n  const [currentName, setCurrentName] = useState(\"\");\r\n\r\n  const handleChange = (e) => {\r\n    if (!e.target.value.trim().length) return;\r\n    setCurrentName(e.target.value);\r\n  };\r\n\r\n  const handleClick = (e) => {\r\n    setUserName(currentName);\r\n  };\r\n\r\n  return (\r\n    <div className=\"welcomePage\">\r\n      <h1>Welcome to the chat App</h1>\r\n      <p>Enter your name and lets have fun together</p>\r\n      <form>\r\n        <input\r\n          type=\"text\"\r\n          value={currentName}\r\n          placeholder=\"Enter your name\"\r\n          onChange={handleChange}\r\n        ></input>\r\n        <button type=\"submit\" onClick={handleClick}>\r\n          Lets Go\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default WelcomePage;\r\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport Chat from \"./components/Chat\";\nimport WelcomePage from \"./components/WelcomePage\";\nexport const AppContext = React.createContext();\n\nfunction App() {\n  const [userName, setUserName] = useState(\"\");\n\n  if (!userName)\n    return (\n      <AppContext.Provider value={{ userName, setUserName }}>\n        <WelcomePage />\n      </AppContext.Provider>\n    );\n\n  return (\n    <div className=\"App\">\n      <AppContext.Provider value={{ userName, setUserName }}>\n        <Chat />\n      </AppContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}